  [1m[35m (204.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (181.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (205.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (166.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20210521001616)
  [1m[35m (199.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (299.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "username" character varying, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (194.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521001616"]]
  [1m[35m (210.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (177.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (195.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (201.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-05-21 00:24:23.718759"], ["updated_at", "2021-05-21 00:24:23.718759"]]
  [1m[35m (133.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (138.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (133.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (205.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/user" for 127.0.0.1 at 2021-05-20 21:27:59 -0300
  [1m[35m (306.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/user"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:28:13 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User_One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
Completed 500 Internal Server Error in 1187ms (ActiveRecord: 1162.7ms | Allocations: 4633)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):
  
app/controllers/users_controller.rb:15:in `create'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:29:14 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User_One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 257)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):
  
app/controllers/users_controller.rb:15:in `create'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:30:35 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 257)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):
  
app/controllers/users_controller.rb:15:in `create'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:32:41 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
Completed 500 Internal Server Error in 1450ms (ActiveRecord: 1428.2ms | Allocations: 4176)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):
  
app/controllers/users_controller.rb:16:in `create'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:40:52 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 1273)


  
NameError (uninitialized constant #<Class:0x00007ff0c438d990>::AvatarUploader):
  
app/models/user.rb:3:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/users_controller.rb:16:in `create'
Started POST "/users" for 127.0.0.1 at 2021-05-20 21:42:05 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}
  [1m[35m (128.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (200.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (202.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Create (199.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "username", "email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "User One"], ["username", "user_one"], ["email", "user_one@email.com"], ["password_digest", "$2a$12$vSFwtLrChbQlPvSOwyLu1eB4fK06uG3uVrp0Aa3c/dXJhMotL9fai"], ["created_at", "2021-05-21 00:42:07.602361"], ["updated_at", "2021-05-21 00:42:07.602361"]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[35m (229.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
Completed 201 Created in 2074ms (Views: 1.1ms | ActiveRecord: 1763.1ms | Allocations: 10064)


Started POST "/auth/login" for 127.0.0.1 at 2021-05-20 21:43:10 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (132.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
Completed 500 Internal Server Error in 901ms (ActiveRecord: 374.5ms | Allocations: 2702)


  
NameError (uninitialized constant AuthenticationController::JsonWebToken):
  
app/controllers/authentication_controller.rb:7:in `login'
Started POST "/auth/login" for 127.0.0.1 at 2021-05-20 21:45:23 -0300
  [1m[35m (181.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (252.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
Completed 200 OK in 1838ms (Views: 0.3ms | ActiveRecord: 1235.0ms | Allocations: 6388)


Started GET "/users" for 127.0.0.1 at 2021-05-20 21:46:58 -0300
Processing by UsersController#index as */*
  [1m[36mUser Load (179.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (127.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
Completed 200 OK in 525ms (Views: 4.2ms | ActiveRecord: 306.5ms | Allocations: 1847)


  [1m[35m (209.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (225.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateLocations (20210521223418)
  [1m[35m (223.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (360.9ms)[0m  [1m[35mCREATE TABLE "locations" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying, "postal_code" character varying, "number" character varying, "address" character varying, "country" character varying, "country_code" character varying, "state" character varying, "state_code" character varying, "latitude" float, "longitude" float, "coordinates" text[] DEFAULT '{}', "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_5e107925c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (417.9ms)[0m  [1m[35mCREATE  INDEX  "index_locations_on_user_id" ON "locations"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (204.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223418"]]
  [1m[35m (583.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateHatings (20210521223959)
  [1m[35m (147.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (188.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (382.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateRatings (20210521223959)
  [1m[35m (1439.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (283.4ms)[0m  [1m[35mCREATE TABLE "ratings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "rate" float, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a7dfeb9f5f"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_bc78a0e0b0"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (227.2ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_user_id" ON "ratings"  ("user_id")[0m
  [1m[35m (213.8ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_location_id" ON "ratings"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (606.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223959"]]
  [1m[35m (314.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateComments (20210521231955)
  [1m[35m (209.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (147.6ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "comment" text, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_c3a3331976"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (1239.4ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_user_id" ON "comments"  ("user_id")[0m
  [1m[35m (2307.8ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_location_id" ON "comments"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (863.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521231955"]]
  [1m[35m (281.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2930.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (257.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (2504.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-21 21:51:45 -0300
  [1m[35m (185.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1624.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 5713ms (Views: 2.2ms | ActiveRecord: 5152.2ms | Allocations: 9490)


Started POST "/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:05:43 -0300
  
ActionController::RoutingError (No route matches [POST] "/locations"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/location?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:05:53 -0300
  
ActionController::RoutingError (No route matches [POST] "/location"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:07:26 -0300
  
Zeitwerk::NameError (wrong constant name CommentsController copy inferred by Module from file

  /home/alysson/Documentos/map-near-places/app/controllers/api/v1/comments_controller copy.rb

Possible ways to address this:

  * Tell Zeitwerk to ignore this particular file.
  * Tell Zeitwerk to ignore one of its parent directories.
  * Rename the file to comply with the naming conventions.
  * Modify the inflector to handle this case.
):
  
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:558:in `rescue in block in set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:534:in `block in set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:733:in `block in ls'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:725:in `foreach'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:725:in `ls'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:533:in `set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:71:in `block in on_namespace_loaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:70:in `each'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:70:in `on_namespace_loaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:55:in `block in on_dir_autoloaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:41:in `synchronize'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:41:in `on_dir_autoloaded'
zeitwerk (2.4.2) lib/zeitwerk/kernel.rb:30:in `require'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:284:in `const_get'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:284:in `block in constantize'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `each'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `inject'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `constantize'
activesupport (6.0.3.7) lib/active_support/dependencies/zeitwerk_integration.rb:19:in `constantize'
actionpack (6.0.3.7) lib/action_dispatch/http/request.rb:89:in `controller_class_for'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:100:in `binary_params_for?'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:91:in `set_binary_encoding'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:69:in `path_parameters='
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:47:in `block in serve'
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.7) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.0.3.7) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.7) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:07:45 -0300
  [1m[35m (207.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Zeitwerk::NameError (wrong constant name CommentsController copy inferred by Module from file

  /home/alysson/Documentos/map-near-places/app/controllers/api/v1/comments_controller copy.rb

Possible ways to address this:

  * Tell Zeitwerk to ignore this particular file.
  * Tell Zeitwerk to ignore one of its parent directories.
  * Rename the file to comply with the naming conventions.
  * Modify the inflector to handle this case.
):
  
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:558:in `rescue in block in set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:534:in `block in set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:733:in `block in ls'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:725:in `foreach'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:725:in `ls'
zeitwerk (2.4.2) lib/zeitwerk/loader.rb:533:in `set_autoloads_in_dir'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:71:in `block in on_namespace_loaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:70:in `each'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:70:in `on_namespace_loaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:55:in `block in on_dir_autoloaded'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:41:in `synchronize'
zeitwerk (2.4.2) lib/zeitwerk/loader/callbacks.rb:41:in `on_dir_autoloaded'
zeitwerk (2.4.2) lib/zeitwerk/kernel.rb:30:in `require'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:284:in `const_get'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:284:in `block in constantize'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `each'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `inject'
activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `constantize'
activesupport (6.0.3.7) lib/active_support/dependencies/zeitwerk_integration.rb:19:in `constantize'
actionpack (6.0.3.7) lib/action_dispatch/http/request.rb:89:in `controller_class_for'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:100:in `binary_params_for?'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:91:in `set_binary_encoding'
actionpack (6.0.3.7) lib/action_dispatch/http/parameters.rb:69:in `path_parameters='
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:47:in `block in serve'
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.7) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.7) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.0.3.7) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.7) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:10:01 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (299.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1939ms (ActiveRecord: 1539.3ms | Allocations: 11618)


  
Zeitwerk::NameError (expected file /home/alysson/Documentos/map-near-places/app/models/location.rb to define constant Location, but didn't):
  
app/controllers/api/v1/locations_controller.rb:24:in `create'
Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:11:39 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (226.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameters: :postal_code, :number[0m
Completed 500 Internal Server Error in 1351ms (ActiveRecord: 1275.0ms | Allocations: 16843)


  
ActiveModel::UnknownAttributeError (unknown attribute 'city' for Location.):
  
app/controllers/api/v1/locations_controller.rb:24:in `create'
  [1m[35m (230.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (206.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCityToLocation (20210522011238)
  [1m[35m (372.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (569.8ms)[0m  [1m[35mALTER TABLE "locations" ADD "city" character varying[0m
  [1m[36mprimary::SchemaMigration Create (853.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210522011238"]]
  [1m[35m (246.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (229.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (183.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (314.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:14:07 -0300
  [1m[35m (271.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (327.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameters: :postal_code, :number[0m
  [1m[35m (898.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (169.4ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Beira Mar CondomÃ­nio Clube - 4 Torres"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (984.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 422 Unprocessable Entity in 7902ms (Views: 9.5ms | ActiveRecord: 4483.0ms | Allocations: 1041270)


Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:15:33 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (203.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameters: :postal_code, :number[0m
  [1m[35m (198.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (208.4ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Beira Mar CondomÃ­nio Clube - 4 Torres"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (202.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 422 Unprocessable Entity in 1441ms (Views: 1.0ms | ActiveRecord: 813.0ms | Allocations: 6567)


Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:15:51 -0300
  [1m[35m (269.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (132.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameters: :postal_code, :number[0m
  [1m[35m (154.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (228.7ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Beira Mar CondomÃ­nio Clube - 4 Torres"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (222.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 422 Unprocessable Entity in 3426ms (Views: 2.8ms | ActiveRecord: 2141.3ms | Allocations: 370942)


Started POST "/api/v1/locations?latitude=-7.93762&longitude=-34.827135&postal_code=53437-050&state_code=PE&number=2489&address=Av.%20Jo%C3%A3o%20Fonseca%20de%20Albuquerque%20-%20Janga&city=Paulista&country=Brasil&name=Beira%20Mar%20Condom%C3%ADnio%20Clube%20-%204%20Torres" for 127.0.0.1 at 2021-05-21 22:16:50 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.93762", "longitude"=>"-34.827135", "postal_code"=>"53437-050", "state_code"=>"PE", "number"=>"2489", "address"=>"Av. JoÃ£o Fonseca de Albuquerque - Janga", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Beira Mar CondomÃ­nio Clube - 4 Torres"}
  [1m[36mUser Load (128.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[35m (126.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (129.6ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Beira Mar CondomÃ­nio Clube - 4 Torres"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Create (183.2ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Beira Mar CondomÃ­nio Clube - 4 Torres"], ["postal_code", "53437-050"], ["number", "2489"], ["address", "Av. JoÃ£o Fonseca de Albuquerque - Janga"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -7.93762], ["longitude", -34.827135], ["created_at", "2021-05-22 01:16:53.381664"], ["updated_at", "2021-05-22 01:16:53.381664"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (205.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (1.06ms)
Completed 201 Created in 2330ms (Views: 3.1ms | ActiveRecord: 1634.4ms | Allocations: 23508)


Started POST "/api/v1/locations?latitude=-7.9394612&longitude=-34.8252006&postal_code=53437-000&state_code=PE&number=2071&city=Paulista&country=Brasil&name=Armazem%20Coral&coordinates=%5B-7.9394612,%20-34.8252006%5D&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:21:25 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9394612", "longitude"=>"-34.8252006", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2071", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Armazem Coral", "coordinates"=>"[-7.9394612, -34.8252006]", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
  [1m[36mUser Load (172.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :coordinates[0m
  [1m[35m (201.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (205.7ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Armazem Coral"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Create (281.1ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Armazem Coral"], ["postal_code", "53437-000"], ["number", "2071"], ["address", "Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -7.9394612], ["longitude", -34.8252006], ["created_at", "2021-05-22 01:21:27.215061"], ["updated_at", "2021-05-22 01:21:27.215061"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (198.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.89ms)
Completed 201 Created in 2021ms (Views: 2.2ms | ActiveRecord: 1060.0ms | Allocations: 6928)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=%5B-7.9323369,%20-34.823938%5D&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:23:34 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"[-7.9323369, -34.823938]", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
  [1m[36mUser Load (242.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :coordinates[0m
  [1m[35m (273.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Exists? (939.4ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "ItaÃº"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[36mLocation Create (293.0ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "ItaÃº"], ["postal_code", "53437-000"], ["number", "2885"], ["address", "Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -7.9323369], ["longitude", -34.823938], ["created_at", "2021-05-22 01:23:37.429109"], ["updated_at", "2021-05-22 01:23:37.429109"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
  [1m[35m (305.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:27:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.83ms)
Completed 201 Created in 3294ms (Views: 1.8ms | ActiveRecord: 2054.4ms | Allocations: 6929)


Started PUT "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga&id=3" for 127.0.0.1 at 2021-05-21 22:24:11 -0300
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/locations"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/v1/locations" for 127.0.0.1 at 2021-05-21 22:24:49 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 290)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:25:25 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 4.1ms | ActiveRecord: 0.0ms | Allocations: 264)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:27:36 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 472)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:27:57 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 472)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:28:06 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms | Allocations: 472)


Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:28:39 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 481)


Started GET "/api/v1/locations" for 127.0.0.1 at 2021-05-21 22:29:05 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms | Allocations: 295)


Started GET "/api/v1/locations?id=1" for 127.0.0.1 at 2021-05-21 22:29:15 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"id"=>"1", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 168)


Started GET "/users" for 127.0.0.1 at 2021-05-21 22:30:19 -0300
Processing by UsersController#index as */*
  [1m[36mUser Load (326.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (177.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
No serializer found for resource: #<User id: 1, name: "User One", username: "user_one", email: "user_one@email.com", password_digest: [FILTERED], created_at: "2021-05-21 00:42:07", updated_at: "2021-05-21 00:42:07">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with User::ActiveRecord_Relation (0.77ms)
Completed 200 OK in 1217ms (Views: 16.3ms | ActiveRecord: 1169.6ms | Allocations: 7917)


Started GET "/api/v1/locations" for 127.0.0.1 at 2021-05-21 22:30:37 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms | Allocations: 170)


Started GET "/api/v1/locations?type=map" for 127.0.0.1 at 2021-05-21 22:30:53 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 168)


Started GET "/api/v1/locations?type=map" for 127.0.0.1 at 2021-05-21 22:31:58 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 297)


Started GET "/api/v1/locations?type=map" for 127.0.0.1 at 2021-05-21 22:35:22 -0300
  [1m[35m (1910.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms | Allocations: 585)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135" for 127.0.0.1 at 2021-05-21 22:36:51 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 171)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135" for 127.0.0.1 at 2021-05-21 22:38:36 -0300
  [1m[35m (277.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 306)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135" for 127.0.0.1 at 2021-05-21 22:39:59 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 301)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135" for 127.0.0.1 at 2021-05-21 22:41:25 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 171)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:42:05 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 168)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:42:38 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 300)


  [1m[36mUser Load (161.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:43:40 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 304)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:43:42 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 168)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:43:53 -0300
  [1m[35m (204.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ApplicationController#not_found as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one", "a"=>"api/v1/locations"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms | Allocations: 585)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:45:29 -0300
  [1m[35m (997.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (540.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 6988ms (ActiveRecord: 6677.6ms | Allocations: 9674)


  
NameError (uninitialized constant Api::V1::Map
Did you mean?  Api::Map):
  
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:46:16 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (413.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1016ms (ActiveRecord: 998.3ms | Allocations: 6860)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
        each_serializer: 'serializer'
                       ^
):
  
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started POST "/api/v1/locations?latitude=-7.9323369&longitude=-34.823938&postal_code=53437-000&state_code=PE&number=2885&city=Paulista&country=Brasil&name=Ita%C3%BA&coordinates=-7.9323369,%20-34.823938&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 22:47:47 -0300
  [1m[35m (195.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.9323369", "longitude"=>"-34.823938", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"2885", "city"=>"Paulista", "country"=>"Brasil", "name"=>"ItaÃº", "coordinates"=>"-7.9323369, -34.823938", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 3.2ms | ActiveRecord: 0.0ms | Allocations: 758)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:48:07 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (327.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 8660ms (ActiveRecord: 7447.9ms | Allocations: 9206)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
        each_serializer: 'serializer'
                       ^
):
  
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:49:10 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (145.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 710ms (ActiveRecord: 661.5ms | Allocations: 6849)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
        each_serializer: LocationsSerializer
                       ^
):
  
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:49:55 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (128.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 2238ms (ActiveRecord: 2210.0ms | Allocations: 6841)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
        serializer: LocationsSerializer
                  ^
):
  
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:50:37 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (205.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 818ms (ActiveRecord: 784.4ms | Allocations: 6871)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:22: syntax error, unexpected ',', expecting `end'
...[@latitude, @longitude], 1000), each_serializer: LocationsSe...
...                              ^
):
  
app/services/api/map/near_locations.rb:22: syntax error, unexpected ',', expecting `end'
app/services/api/map/near_locations.rb:22: syntax error, unexpected ',', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:52:00 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (208.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 829ms (ActiveRecord: 788.3ms | Allocations: 8567)


  
NameError (uninitialized constant Api::V1::Map
Did you mean?  Api::Map):
  
app/services/api/map/near_locations.rb:1:in `<main>'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:52:26 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (183.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1358ms (ActiveRecord: 1311.1ms | Allocations: 11708)


  
NameError (uninitialized constant ApplicationSerializer
Did you mean?  ApplicationMailer):
  
app/serializers/locations_serializer.rb:1:in `<main>'
app/services/api/map/near_locations.rb:23:in `query'
app/services/api/map/near_locations.rb:11:in `prepare_map'
app/controllers/api/v1/locations_controller.rb:15:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:53:31 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (206.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 816ms (ActiveRecord: 764.1ms | Allocations: 9522)


  
Zeitwerk::NameError (expected file /home/alysson/Documentos/map-near-places/app/serializers/locations_serializer.rb to define constant LocationsSerializer, but didn't):
  
app/services/api/map/near_locations.rb:23:in `query'
app/services/api/map/near_locations.rb:11:in `prepare_map'
app/controllers/api/v1/locations_controller.rb:15:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:54:13 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (230.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 865ms (ActiveRecord: 815.7ms | Allocations: 9943)


  
NoMethodError (undefined method `render' for #<Api::Map::NearLocations:0x00007f919cb730d8>):
  
app/services/api/map/near_locations.rb:23:in `query'
app/services/api/map/near_locations.rb:11:in `prepare_map'
app/controllers/api/v1/locations_controller.rb:15:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:54:45 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (274.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 944ms (ActiveRecord: 914.6ms | Allocations: 6823)


  
SyntaxError (/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
        return json: Location.joins(:user).near([...
                   ^
/home/alysson/Documentos/map-near-places/app/services/api/map/near_locations.rb:23: syntax error, unexpected ',', expecting `end'
...[@latitude, @longitude], 1000), each_serializer: LocationsSe...
...                              ^
):
  
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ',', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ':', expecting `end'
app/services/api/map/near_locations.rb:23: syntax error, unexpected ',', expecting `end'
app/controllers/api/v1/locations_controller.rb:14:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:57:29 -0300
  
SyntaxError (/home/alysson/Documentos/map-near-places/app/controllers/api/v1/locations_controller.rb:14: syntax error, unexpected ')', expecting ']'
...ude], params[:longitude], 1000), status: :ok, each_serialize...
...                              ^
/home/alysson/Documentos/map-near-places/app/controllers/api/v1/locations_controller.rb:74: syntax error, unexpected `end', expecting end-of-input
  end
  ^~~
):
  
app/controllers/api/v1/locations_controller.rb:14: syntax error, unexpected ')', expecting ']'
app/controllers/api/v1/locations_controller.rb:74: syntax error, unexpected `end', expecting end-of-input
app/controllers/api/v1/locations_controller.rb:14: syntax error, unexpected ')', expecting ']'
app/controllers/api/v1/locations_controller.rb:74: syntax error, unexpected `end', expecting end-of-input
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:58:23 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (623.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (285.4ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:14:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.27ms)
Completed 500 Internal Server Error in 2242ms (Views: 75.4ms | ActiveRecord: 2124.6ms | Allocations: 23300)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/locations_controller.rb:58:in `respond'
app/controllers/api/v1/locations_controller.rb:18:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 22:58:56 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (223.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (249.9ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/locations_controller.rb:13:in `p'
  [1m[36mLocation Load (829.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:14:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.85ms)
Completed 500 Internal Server Error in 2849ms (Views: 8.1ms | ActiveRecord: 2754.6ms | Allocations: 20690)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/locations_controller.rb:58:in `respond'
app/controllers/api/v1/locations_controller.rb:18:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:00:36 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (2365.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (131.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/locations_controller.rb:8:in `p'
  [1m[36mLocation Load (324.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2.1ms)
Completed 200 OK in 4359ms (Views: 8.7ms | ActiveRecord: 4282.7ms | Allocations: 20132)


Started POST "/api/v1/locations?latitude=-7.935806&longitude=-34.8274155&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Condom%C3%ADnio%20Quinta%20Do%20Mediterr%C3%A2neo&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 23:07:28 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.935806", "longitude"=>"-34.8274155", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"CondomÃ­nio Quinta Do MediterrÃ¢neo", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
  [1m[36mUser Load (209.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[35m (196.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:20:in `create'
  [1m[36mLocation Exists? (204.5ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "CondomÃ­nio Quinta Do MediterrÃ¢neo"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:20:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:20:in `create'
  [1m[36mLocation Create (433.6ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "CondomÃ­nio Quinta Do MediterrÃ¢neo"], ["postal_code", "53437-290"], ["number", "335"], ["address", "Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -7.935806], ["longitude", -34.8274155], ["created_at", "2021-05-22 02:07:34.336678"], ["updated_at", "2021-05-22 02:07:34.336678"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:20:in `create'
  [1m[35m (193.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:20:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (1.36ms)
Completed 201 Created in 2887ms (Views: 3.9ms | ActiveRecord: 1436.1ms | Allocations: 10515)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:07:38 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (201.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (506.8ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/controllers/api/v1/locations_controller.rb:8:in `p'
  [1m[36mLocation Load (127.7ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:9:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.67ms)
Completed 200 OK in 862ms (Views: 3.0ms | ActiveRecord: 835.7ms | Allocations: 4214)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:14:55 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (392.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 204 No Content in 934ms (ActiveRecord: 592.7ms | Allocations: 9096)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:16:26 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (1334.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (488.6ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY "locations"."name" ASC, distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.17ms)
Completed 200 OK in 4469ms (Views: 48.8ms | ActiveRecord: 4362.8ms | Allocations: 19140)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:18:15 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (209.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (203.2ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.56ms)
Completed 200 OK in 1548ms (Views: 43.4ms | ActiveRecord: 1466.5ms | Allocations: 18854)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:18:23 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (247.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (193.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.81ms)
Completed 200 OK in 451ms (Views: 6.6ms | ActiveRecord: 440.5ms | Allocations: 2396)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:21:02 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (902.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1719ms (ActiveRecord: 1681.1ms | Allocations: 8488)


  
ArgumentError (Direction "{:name=>:asc}" is invalid. Valid directions are: [:asc, :desc, :ASC, :DESC, "asc", "desc", "ASC", "DESC"]):
  
app/controllers/api/v1/locations_controller.rb:12:in `index'
Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:21:31 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (131.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 623ms (ActiveRecord: 584.4ms | Allocations: 8428)


  
ArgumentError (Direction "{:name=>:asc}" is invalid. Valid directions are: [:asc, :desc, :ASC, :DESC, "asc", "desc", "ASC", "DESC"]):
  
app/controllers/api/v1/locations_controller.rb:12:in `index'
Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:21:55 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (404.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (444.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.26ms)
Completed 200 OK in 2983ms (Views: 41.9ms | ActiveRecord: 2901.7ms | Allocations: 18643)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:23:05 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (209.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (201.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.27ms)
Completed 200 OK in 1445ms (Views: 42.4ms | ActiveRecord: 1367.4ms | Allocations: 18618)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:23:11 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (217.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (184.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:53:in `respond'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.77ms)
Completed 200 OK in 415ms (Views: 8.2ms | ActiveRecord: 401.5ms | Allocations: 2609)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:27:25 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (292.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (921.0ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.86ms)
Completed 200 OK in 3215ms (Views: 47.9ms | ActiveRecord: 3117.1ms | Allocations: 18953)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:27:50 -0300
  [1m[35m (295.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (257.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (237.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4.28ms)
Completed 500 Internal Server Error in 2563ms (ActiveRecord: 2192.7ms | Allocations: 26700)


  
NameError (uninitialized constant #<Class:0x00007f31988d3b20>::Rating
Did you mean?  Hating):
  
app/models/location.rb:18:in `score'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:28:25 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (221.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (203.0ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (11.79ms)
Completed 500 Internal Server Error in 1391ms (ActiveRecord: 1285.5ms | Allocations: 23404)


  
NoMethodError (undefined method `location_id' for #<Location:0x00005583b6d2e378>
Did you mean?  location_address):
  
app/models/location.rb:18:in `score'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:29:00 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (208.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (271.8ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (156.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (175.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (190.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (208.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (946.06ms)
Completed 200 OK in 2546ms (Views: 60.7ms | ActiveRecord: 2435.7ms | Allocations: 22837)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:29:38 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (204.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (147.4ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (130.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (252.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (200.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (193.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (202.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (202.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (204.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1807.41ms)
Completed 200 OK in 3261ms (Views: 86.4ms | ActiveRecord: 3130.2ms | Allocations: 27741)


Started GET "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-21 23:33:41 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "a"=>"api/v1/ratings"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms | Allocations: 488)


Started GET "/api/v1/locations/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-21 23:34:17 -0300
Processing by Api::V1::LocationsController#show as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "id"=>"ratings"}
  [1m[36mUser Load (178.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (126.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:56:in `find_location'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Filter chain halted as :find_location rendered or redirected
Completed 403 Forbidden in 1508ms (Views: 2.2ms | ActiveRecord: 1260.4ms | Allocations: 10147)


Started GET "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-21 23:34:30 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "a"=>"api/v1/ratings"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 168)


Started POST "/api/v1/locations?latitude=-7.935806&longitude=-34.8274155&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Condom%C3%ADnio%20Quinta%20Do%20Mediterr%C3%A2neo&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-21 23:44:30 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.935806", "longitude"=>"-34.8274155", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"CondomÃ­nio Quinta Do MediterrÃ¢neo", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
  [1m[36mUser Load (126.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[35m (126.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:30:in `create'
  [1m[36mLocation Exists? (127.3ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "CondomÃ­nio Quinta Do MediterrÃ¢neo"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:30:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:30:in `create'
  [1m[35m (257.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/locations_controller.rb:30:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 422 Unprocessable Entity in 3156ms (Views: 1.6ms | ActiveRecord: 766.6ms | Allocations: 366903)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:44:38 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (198.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (198.2ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (128.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (253.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (199.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (195.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (306.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (126.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (133.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1913.53ms)
Completed 200 OK in 2322ms (Views: 51.2ms | ActiveRecord: 2263.6ms | Allocations: 11748)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:45:21 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (211.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (215.1ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (127.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (128.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (206.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (251.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (254.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (178.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (201.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1717.32ms)
Completed 200 OK in 3064ms (Views: 80.6ms | ActiveRecord: 2939.2ms | Allocations: 27892)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:45:45 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (128.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (221.6ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (202.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (584.92ms)
Completed 500 Internal Server Error in 1807ms (ActiveRecord: 1718.2ms | Allocations: 21746)


  
TypeError (String can't be coerced into Float):
  
app/serializers/locations_serializer.rb:5:in `+'
app/serializers/locations_serializer.rb:5:in `distance'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:47:42 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (249.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (176.3ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (127.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (237.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (201.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (202.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (206.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (197.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1738.88ms)
Completed 200 OK in 3068ms (Views: 79.8ms | ActiveRecord: 2944.8ms | Allocations: 27980)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-21 23:48:27 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (200.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (222.0ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (205.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (126.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (132.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (234.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (201.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (206.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1743.83ms)
Completed 200 OK in 3116ms (Views: 81.1ms | ActiveRecord: 2983.1ms | Allocations: 27858)


  [1m[36mLocation Load (205.5ms)[0m  [1m[34mSELECT locations.*, NULL::text AS distance, NULL::text AS bearing FROM "locations" WHERE (false) LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mLocation Load (213.3ms)[0m  [1m[34mSELECT locations.*, NULL::text AS distance, NULL::text AS bearing FROM "locations" WHERE (false) LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mLocation Load (134.9ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mLocation Load (255.2ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLocation Load (162.2ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  [1m[36mLocation Load (261.6ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  [1m[36mLocation Load (186.6ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:05:20 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (183.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (277.5ms)[0m  [1m[34mSELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -22.410798311084797 AND 6.535558311084796 AND locations.longitude BETWEEN -49.440322189962146 AND -20.21394781003785 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (127.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (233.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (201.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (128.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (128.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (252.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (196.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1501.4ms)
Completed 200 OK in 2792ms (Views: 74.8ms | ActiveRecord: 2528.8ms | Allocations: 27459)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:05:56 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (206.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (184.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (230.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (291.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (177.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (233.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (291.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (196.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (174.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2022.48ms)
Completed 200 OK in 3781ms (Views: 77.5ms | ActiveRecord: 3669.1ms | Allocations: 27939)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:06:12 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (278.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 824ms (ActiveRecord: 793.4ms | Allocations: 8572)


  
TypeError (nil can't be coerced into Float):
  
app/controllers/api/v1/locations_controller.rb:10:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:06:20 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (127.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (188.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (127.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (251.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (194.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (196.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (143.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (127.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (131.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1521.72ms)
Completed 200 OK in 2854ms (Views: 74.3ms | ActiveRecord: 2736.5ms | Allocations: 27895)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:40:41 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (205.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (204.2ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (210.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (399.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (176.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (200.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (198.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1835.1ms)
Completed 200 OK in 2628ms (Views: 50.9ms | ActiveRecord: 2325.5ms | Allocations: 10557)


Started GET "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:45:08 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "a"=>"api/v1/ratings"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 303)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:46:17 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (127.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (239.4ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (204.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (127.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (174.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (198.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (206.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (200.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (288.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1822.9ms)
Completed 200 OK in 3351ms (Views: 81.8ms | ActiveRecord: 3220.1ms | Allocations: 28115)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:46:32 -0300
  [1m[35m (203.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (205.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (200.9ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (188.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (199.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (193.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (170.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1599.29ms)
Completed 200 OK in 3583ms (Views: 116.9ms | ActiveRecord: 3235.3ms | Allocations: 33205)


Started GET "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:48:21 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "a"=>"api/v1/ratings"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms | Allocations: 489)


Started GET "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:48:30 -0300
  [1m[35m (333.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ApplicationController#not_found as */*
  Parameters: {"location_id"=>" 2", "rate"=>"2.1", "_username"=>"user_one", "a"=>"api/v1/ratings"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms | Allocations: 585)


Started POST "/api/v1/ratings?location_id=%202&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:49:48 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/ratings"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/ratings?location_id=2&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:52:30 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/ratings"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/ratings?location_id=2&rate=2.1&_username=user_one" for 127.0.0.1 at 2021-05-22 00:53:09 -0300
  [1m[35m (211.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"2", "rate"=>"2.1", "_username"=>"user_one"}
  [1m[36mUser Load (155.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (266.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (173.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (128.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (146.5ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["rate", 2.1], ["created_at", "2021-05-22 03:53:16.140472"], ["updated_at", "2021-05-22 03:53:16.140472"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (128.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (1.08ms)
Completed 201 Created in 3483ms (Views: 6.3ms | ActiveRecord: 2810.0ms | Allocations: 32059)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:53:22 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (172.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (412.7ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (128.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (133.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (126.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (181.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (199.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (198.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1405.09ms)
Completed 200 OK in 2021ms (Views: 55.7ms | ActiveRecord: 1956.0ms | Allocations: 12941)


Started POST "/api/v1/ratings?location_id=2&rate=2.5&_username=user_one" for 127.0.0.1 at 2021-05-22 00:53:44 -0300
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"2", "rate"=>"2.5", "_username"=>"user_one"}
  [1m[36mUser Load (126.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (129.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (184.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (126.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (128.0ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["rate", 2.5], ["created_at", "2021-05-22 03:53:45.407902"], ["updated_at", "2021-05-22 03:53:45.407902"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (131.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.67ms)
Completed 201 Created in 856ms (Views: 1.7ms | ActiveRecord: 827.3ms | Allocations: 6152)


Started POST "/api/v1/ratings?location_id=2&rate=4.8&_username=user_one" for 127.0.0.1 at 2021-05-22 00:53:53 -0300
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"2", "rate"=>"4.8", "_username"=>"user_one"}
  [1m[36mUser Load (202.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (203.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (199.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (211.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (196.3ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["rate", 4.8], ["created_at", "2021-05-22 03:53:54.503079"], ["updated_at", "2021-05-22 03:53:54.503079"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (190.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.73ms)
Completed 201 Created in 1230ms (Views: 1.8ms | ActiveRecord: 1202.5ms | Allocations: 6165)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:53:58 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (205.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (301.4ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (228.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (148.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (225.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (272.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (126.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (126.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (167.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1536.77ms)
Completed 200 OK in 2053ms (Views: 47.3ms | ActiveRecord: 2001.5ms | Allocations: 10344)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 00:54:26 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (178.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (131.5ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (150.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (126.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (217.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (129.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (190.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (411.1ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (198.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (210.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (207.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (185.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (210.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (198.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2620.79ms)
Completed 200 OK in 3824ms (Views: 87.7ms | ActiveRecord: 3697.0ms | Allocations: 28267)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:49:08 -0300
  [1m[35m (254.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (168.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (191.7ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (228.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (213.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (419.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[36mRating Load (140.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (584.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (144.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (251.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (198.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (306.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (514.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (194.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (204.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (336.3ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[35m (170.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (194.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (197.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4927.08ms)
Completed 200 OK in 7230ms (Views: 427.8ms | ActiveRecord: 6597.4ms | Allocations: 47721)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:49:38 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (165.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (204.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (130.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (277.29ms)
Completed 500 Internal Server Error in 1664ms (ActiveRecord: 1553.1ms | Allocations: 22109)


  
NameError (uninitialized constant Location::Comment):
  
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:50:02 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (250.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (138.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (130.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (134.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (234.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[36mRating Load (178.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (143.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (254.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (207.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (129.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (126.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (129.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (131.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (127.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[35m (132.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (178.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (126.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (3018.0ms)
Completed 200 OK in 4556ms (Views: 102.0ms | ActiveRecord: 4413.5ms | Allocations: 38185)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:56:22 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (423.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (132.2ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (130.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (231.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (126.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[36mRating Load (129.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (219.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (128.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (170.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (131.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (128.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (248.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (126.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (176.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (194.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers]   [1m[35m (200.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (205.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (202.1ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2962.62ms)
Completed 200 OK in 3971ms (Views: 254.1ms | ActiveRecord: 3472.7ms | Allocations: 37647)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:56:51 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (192.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1010ms (ActiveRecord: 968.9ms | Allocations: 9156)


  
NameError (uninitialized constant LocationsSerializer::RatingSerializer):
  
app/serializers/locations_serializer.rb:5:in `<class:LocationsSerializer>'
app/serializers/locations_serializer.rb:1:in `<main>'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:57:16 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (231.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (186.1ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (233.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (222.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (127.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (225.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (125.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (134.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (140.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (153.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (212.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (207.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (131.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (174.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (191.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (213.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (178.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (210.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (3314.95ms)
Completed 200 OK in 4776ms (Views: 133.9ms | ActiveRecord: 4592.8ms | Allocations: 37861)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:58:02 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (329.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (202.5ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (127.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (144.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (237.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (208.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (201.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (204.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (264.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (212.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (230.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.3ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (208.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (352.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (265.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (250.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (303.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (194.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4167.35ms)
Completed 200 OK in 6120ms (Views: 125.0ms | ActiveRecord: 5955.0ms | Allocations: 37753)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 15:59:51 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (203.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (135.3ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (202.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (289.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (212.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (184.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (200.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (197.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (213.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (189.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (201.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[35m (204.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (201.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[35m (187.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (208.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (3868.15ms)
Completed 200 OK in 5426ms (Views: 140.4ms | ActiveRecord: 5243.6ms | Allocations: 40075)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:03:28 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (441.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (230.2ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (126.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (128.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (245.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (130.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (204.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (126.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (177.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (128.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (239.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (197.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (255.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[35m (236.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (3410.95ms)
Completed 200 OK in 5064ms (Views: 159.8ms | ActiveRecord: 4863.7ms | Allocations: 42960)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:05:12 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (153.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (202.5ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (206.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (376.92ms)
Completed 500 Internal Server Error in 1827ms (ActiveRecord: 1734.5ms | Allocations: 21681)


  
TypeError (superclass mismatch for class Comments):
  
app/models/comment.rb:1:in `<main>'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:06:40 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (313.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (205.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (203.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (381.99ms)
Completed 500 Internal Server Error in 2149ms (ActiveRecord: 2050.0ms | Allocations: 21680)


  
TypeError (superclass mismatch for class Comments):
  
app/models/comment.rb:1:in `<main>'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:07:05 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (197.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (291.6ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (305.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (270.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (239.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (203.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (197.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (153.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (127.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (362.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (300.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (206.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (129.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (364.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (201.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (200.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (302.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (302.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[35m (290.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (305.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (199.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (6041.76ms)
Completed 200 OK in 8082ms (Views: 370.3ms | ActiveRecord: 7669.7ms | Allocations: 49683)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:11:45 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (402.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (303.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (304.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (205.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (296.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (300.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (302.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (304.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mRating Load (302.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mComment Load (199.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:16:in `index'
[active_model_serializers]   [1m[35m (323.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (132.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (134.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (2875.4ms)
Completed 500 Internal Server Error in 3589ms (ActiveRecord: 3511.1ms | Allocations: 18475)


  
NoMethodError (undefined method `distance' for #<Location:0x000055592cd47058>
Did you mean?  distance_to):
  
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:17:34 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (129.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (129.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (205.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (204.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (204.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (270.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (222.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (204.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (196.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (197.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (200.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (180.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (223.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[35m (187.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (207.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (192.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (202.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (182.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (199.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4630.24ms)
Completed 200 OK in 5541ms (Views: 586.8ms | ActiveRecord: 4710.5ms | Allocations: 47794)


Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=%22Lugar%20muito%20bom%20e%20muito%20divertudo%22" for 127.0.0.1 at 2021-05-22 16:18:47 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"\"Lugar muito bom e muito divertudo\""}
  [1m[36mUser Load (128.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mComments Load (205.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (153.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (182.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComments Create (193.6ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["comment", "\"Lugar muito bom e muito divertudo\""], ["created_at", "2021-05-22 19:18:49.209490"], ["updated_at", "2021-05-22 19:18:49.209490"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (201.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
Completed 500 Internal Server Error in 1548ms (ActiveRecord: 1193.8ms | Allocations: 13493)


  
NoMethodError (undefined method `update_status' for #<Comments:0x00007f0f48373d50>
Did you mean?  update_attributes):
  
app/controllers/api/v1/comments_controller.rb:18:in `create'
Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=%22Lugar%20muito%20bom%20e%20muito%20divertudo%22" for 127.0.0.1 at 2021-05-22 16:19:21 -0300
  [1m[35m (205.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"\"Lugar muito bom e muito divertudo\""}
  [1m[36mUser Load (211.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 1536ms (ActiveRecord: 1280.4ms | Allocations: 9780)


  
NameError (uninitialized constant Api::V1::CommentsController::Comments):
  
app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=Lugar%20muito%20bom%20e%20muito%20divertudo" for 127.0.0.1 at 2021-05-22 16:21:07 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"Lugar muito bom e muito divertudo"}
  [1m[36mUser Load (201.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mComment Load (202.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (213.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (190.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (238.1ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["comment", "Lugar muito bom e muito divertudo"], ["created_at", "2021-05-22 19:21:10.143651"], ["updated_at", "2021-05-22 19:21:10.143651"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (234.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (0.81ms)
Completed 201 Created in 3253ms (Views: 12.3ms | ActiveRecord: 2665.3ms | Allocations: 30950)


Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=Lugar%20muito%20bom%20e%20muito%20divertudo" for 127.0.0.1 at 2021-05-22 16:21:27 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"Lugar muito bom e muito divertudo"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 269)


Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=Lugar%20muito%20bom%20e%20muito%20divertudo" for 127.0.0.1 at 2021-05-22 16:21:44 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"Lugar muito bom e muito divertudo"}
  [1m[36mUser Load (199.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mComment Load (202.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (198.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (203.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (194.6ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["comment", "Lugar muito bom e muito divertudo"], ["created_at", "2021-05-22 19:21:45.544007"], ["updated_at", "2021-05-22 19:21:45.544007"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (200.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (0.62ms)
Completed 201 Created in 1228ms (Views: 1.6ms | ActiveRecord: 1198.8ms | Allocations: 6182)


Started POST "/api/v1/comments?location_id=2&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 16:21:56 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "comment"=>"Minha familia adorou tudo"}
  [1m[36mUser Load (199.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mComment Load (203.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (202.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (132.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (134.8ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 2], ["comment", "Minha familia adorou tudo"], ["created_at", "2021-05-22 19:21:57.482558"], ["updated_at", "2021-05-22 19:21:57.482558"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (224.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (0.61ms)
Completed 201 Created in 1127ms (Views: 1.6ms | ActiveRecord: 1096.8ms | Allocations: 6174)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 16:22:03 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (197.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (216.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (204.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (141.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (143.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (214.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (239.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (132.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (224.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (246.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (199.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (204.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (176.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (158.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (246.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (136.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (161.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (198.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (193.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4768.96ms)
Completed 200 OK in 5225ms (Views: 540.1ms | ActiveRecord: 4657.7ms | Allocations: 36804)


  [1m[35m (202.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (171.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (132.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (126.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (204.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 17:36:15 -0300
  [1m[35m (207.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (191.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (182.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (203.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (202.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (188.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (190.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (288.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (215.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (209.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (193.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (129.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (163.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (216.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (170.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (203.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (197.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (199.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (199.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (199.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (302.3ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (5385.6ms)
Completed 200 OK in 7441ms (Views: 628.6ms | ActiveRecord: 6532.6ms | Allocations: 61518)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 17:36:37 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (200.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (202.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (139.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (127.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (233.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (238.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (354.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (194.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (197.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (193.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (195.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (249.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (251.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (159.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (200.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (214.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (127.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (347.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (221.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (274.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (236.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (5465.64ms)
Completed 200 OK in 6951ms (Views: 297.2ms | ActiveRecord: 6603.2ms | Allocations: 53745)


Started POST "/users" for 127.0.0.1 at 2021-05-22 19:15:44 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[35m (192.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (283.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (201.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[35m (227.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 422 Unprocessable Entity in 1616ms (Views: 9.0ms | ActiveRecord: 1135.0ms | Allocations: 354007)


Started GET "/api/v1/locations?location_id=1&_username=user_one" for 127.0.0.1 at 2021-05-22 19:17:24 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"location_id"=>"1", "_username"=>"user_one"}
  [1m[36mUser Load (133.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 489ms (ActiveRecord: 276.1ms | Allocations: 1578)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/locations_controller.rb:52:in `return_request'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/ratings?location_id=1&_username=user_one" for 127.0.0.1 at 2021-05-22 19:18:19 -0300
Processing by Api::V1::RatingsController#index as */*
  Parameters: {"location_id"=>"1", "_username"=>"user_one"}
  [1m[36mUser Load (200.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (202.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
Completed 500 Internal Server Error in 661ms (ActiveRecord: 403.6ms | Allocations: 7542)


  
NameError (uninitialized constant Api::V1::RatingsController::RatingSerializer
Did you mean?  RatingsSerializer):
  
app/controllers/api/v1/ratings_controller.rb:7:in `index'
Started GET "/api/v1/ratings?location_id=1&_username=user_one" for 127.0.0.1 at 2021-05-22 19:18:42 -0300
Processing by Api::V1::RatingsController#index as */*
  Parameters: {"location_id"=>"1", "_username"=>"user_one"}
  [1m[36mUser Load (199.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (414.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
  [1m[36mRating Load (182.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:7:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.15ms)
Completed 200 OK in 2422ms (Views: 270.2ms | ActiveRecord: 2077.2ms | Allocations: 12816)


Started GET "/api/v1/ratings?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 19:18:49 -0300
Processing by Api::V1::RatingsController#index as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one"}
  [1m[36mUser Load (141.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (282.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
  [1m[36mRating Load (205.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
  â†³ app/controllers/api/v1/ratings_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (23.06ms)
Completed 200 OK in 662ms (Views: 27.6ms | ActiveRecord: 629.3ms | Allocations: 5059)


Started PUT "/users?_username=user_one&email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:22:58 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:28:50 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:31:08 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PATCH "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:32:02 -0300
  
ActionController::RoutingError (No route matches [PATCH] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started OPTIONS "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:32:20 -0300
  
ActionController::RoutingError (No route matches [OPTIONS] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:32:26 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:32:55 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:33:32 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 507)


Started GET "/users" for 127.0.0.1 at 2021-05-22 19:33:40 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 272)


Started GET "/users" for 127.0.0.1 at 2021-05-22 19:33:55 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 272)


Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:34:12 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (205.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 2729ms (Views: 0.7ms | ActiveRecord: 2196.0ms | Allocations: 6966)


Started GET "/users" for 127.0.0.1 at 2021-05-22 19:34:37 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (127.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (152.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
No serializer found for resource: #<User id: 1, name: "User One", username: "user_one", email: "user_one@email.com", password_digest: [FILTERED], created_at: "2021-05-21 00:42:07", updated_at: "2021-05-21 00:42:07">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with User::ActiveRecord_Relation (0.62ms)
Completed 200 OK in 525ms (Views: 4.5ms | ActiveRecord: 280.2ms | Allocations: 2155)


Started POST "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:35:12 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]"}
  [1m[35m (241.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (194.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_two@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (225.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER($1) LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:16:in `create'
  [1m[35m (181.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 422 Unprocessable Entity in 1332ms (Views: 0.9ms | ActiveRecord: 1046.7ms | Allocations: 4684)


Started POST "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:37:46 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 792)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/users_controller.rb:15:in `create'
Started POST "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:38:09 -0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "id"=>"1"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 448)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/users_controller.rb:15:in `create'
Started PUT "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:38:23 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:44:47 -0300
  [1m[35m (245.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:44:57 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 799)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:45:51 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 742)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:46:48 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 742)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:47:17 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 738)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:47:26 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 1613)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:47:36 -0300
  [1m[35m (171.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 796)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:48:53 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 747)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:49:15 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 746)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:49:22 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 451)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:49:29 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 742)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:49:49 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 451)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:50:35 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 755)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:51:15 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 754)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:51:27 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 760)


  
ArgumentError (You need to supply at least one validation):
  
app/models/user.rb:6:in `<class:User>'
app/models/user.rb:1:in `<main>'
app/controllers/authentication_controller.rb:7:in `login'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 19:51:50 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (249.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:7:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 1887ms (Views: 1.6ms | ActiveRecord: 1318.1ms | Allocations: 8515)


Started GET "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:52:22 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "id"=>"1"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 485)


Started GET "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:52:39 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "id"=>"1"}
  [1m[36mUser Load (204.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (174.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
No serializer found for resource: #<User id: 1, name: "User One", username: "user_one", email: "user_one@email.com", password_digest: [FILTERED], created_at: "2021-05-21 00:42:07", updated_at: "2021-05-21 00:42:07">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with User::ActiveRecord_Relation (3.2ms)
Completed 200 OK in 1239ms (Views: 24.6ms | ActiveRecord: 974.2ms | Allocations: 8224)


Started PUT "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:52:50 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com&id=1" for 127.0.0.1 at 2021-05-22 19:55:48 -0300
  [1m[35m (196.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 19:59:56 -0300
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/users/1?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 20:00:25 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "_username"=>"1"}
  [1m[36mUser Load (307.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 2029ms (ActiveRecord: 1771.9ms | Allocations: 11045)


  
NoMethodError (undefined method `find!' for #<Class:0x00007f49ec2737c8>
Did you mean?  find):
  
app/controllers/users_controller.rb:39:in `find_user'
Started PUT "/users/1?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 20:01:06 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "_username"=>"1"}
  [1m[36mUser Load (295.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Filter chain halted as :find_user rendered or redirected
Completed 404 Not Found in 1119ms (Views: 3.2ms | ActiveRecord: 1095.7ms | Allocations: 7201)


Started PUT "/users/1?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 20:01:15 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "_username"=>"1"}
  [1m[36mUser Load (391.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (306.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "1"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Filter chain halted as :find_user rendered or redirected
Completed 404 Not Found in 1922ms (Views: 1.4ms | ActiveRecord: 1601.2ms | Allocations: 7629)


Started PUT "/users/1?email=user_two%40email.com&_username=user_one" for 127.0.0.1 at 2021-05-22 20:01:48 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "_username"=>"1"}
  [1m[36mUser Load (135.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (370.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "1"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Filter chain halted as :find_user rendered or redirected
Completed 404 Not Found in 512ms (Views: 0.9ms | ActiveRecord: 506.4ms | Allocations: 1434)


Started PUT "/users/user_one?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 20:02:20 -0300
  [1m[35m (128.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]", "_username"=>"user_one"}
  [1m[36mUser Load (309.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (313.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (270.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (207.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "user_two@email.com"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (290.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "user_one"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Update (301.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "password_digest" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["email", "user_two@email.com"], ["password_digest", "$2a$12$tsXa.2u/Wx2ureg9rimlZ.NiA81inxChTCFZ9roQR/hFfDBM8xFjS"], ["updated_at", "2021-05-22 23:02:28.649696"], ["id", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[35m (309.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
Completed 204 No Content in 4143ms (ActiveRecord: 2960.5ms | Allocations: 14097)


Started GET "/users?email=user_two%40email.com" for 127.0.0.1 at 2021-05-22 20:02:44 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_two@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (302.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (283.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
No serializer found for resource: #<User id: 1, name: "User One", username: "user_one", email: "user_two@email.com", password_digest: [FILTERED], created_at: "2021-05-21 00:42:07", updated_at: "2021-05-22 23:02:28">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with User::ActiveRecord_Relation (0.82ms)
Completed 200 OK in 630ms (Views: 37.7ms | ActiveRecord: 585.4ms | Allocations: 3679)


Started GET "/users?password=[FILTERED]" for 127.0.0.1 at 2021-05-22 20:04:39 -0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (204.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (395.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:7:in `index'
No serializer found for resource: #<User id: 1, name: "User One", username: "user_one", email: "user_two@email.com", password_digest: [FILTERED], created_at: "2021-05-21 00:42:07", updated_at: "2021-05-22 23:02:28">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with User::ActiveRecord_Relation (0.6ms)
Completed 200 OK in 616ms (Views: 6.7ms | ActiveRecord: 599.4ms | Allocations: 1864)


Started PUT "/users/user_one?password=[FILTERED]" for 127.0.0.1 at 2021-05-22 20:04:53 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "_username"=>"user_one"}
  [1m[36mUser Load (203.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (302.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (231.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (303.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "user_one@email.com"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (205.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "user_one"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Update (300.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "password_digest" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["email", "user_one@email.com"], ["password_digest", "$2a$12$PyBtfCS0E.OLJtUZxEeYA.61.d7Amv4nBoaJk/166fiyxgIf40BLa"], ["updated_at", "2021-05-22 23:04:54.993380"], ["id", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[35m (300.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
Completed 204 No Content in 2151ms (ActiveRecord: 1848.1ms | Allocations: 6200)


Started PUT "/users/user_one?password=[FILTERED]" for 127.0.0.1 at 2021-05-22 20:05:03 -0300
Processing by UsersController#update as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "_username"=>"user_one"}
  [1m[36mUser Load (304.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (299.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (345.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (301.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "user_one@email.com"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Exists? (202.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "user_one"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[36mUser Update (201.0ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["password_digest", "$2a$12$edVmNcGUCdUe5b4ykTissOLp3yFXtIV/E5BnjS.BjceVGcejjjy0e"], ["updated_at", "2021-05-22 23:05:05.537301"], ["id", 1]]
  â†³ app/controllers/users_controller.rb:25:in `update'
  [1m[35m (199.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:25:in `update'
Completed 204 No Content in 2151ms (ActiveRecord: 1853.0ms | Allocations: 6169)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 20:21:31 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (238.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (236.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (166.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (265.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (130.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (136.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (210.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (203.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (199.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (131.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (242.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (210.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (220.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (186.2ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (199.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (201.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (204.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (184.3ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (203.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (200.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.1ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (5208.67ms)
Completed 200 OK in 6973ms (Views: 555.7ms | ActiveRecord: 6160.2ms | Allocations: 59732)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 20:21:47 -0300
  [1m[35m (270.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (180.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (185.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (206.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (182.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (385.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (289.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (204.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (212.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (202.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (198.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[35m (199.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (202.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (184.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (206.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (198.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (195.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (205.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (292.2ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (205.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (202.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (6240.03ms)
Completed 200 OK in 8412ms (Views: 828.3ms | ActiveRecord: 7264.4ms | Allocations: 61440)


Started POST "/api/v1/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:22:22 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/2/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:22:32 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/2/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:23:44 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:24:05 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/locations/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/location/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:24:13 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/location/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/location_id=3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:24:30 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/location_id=3/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:25:57 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/locations/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:29:16 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/3/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:29:26 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/comment?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:30:00 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comment"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/comment?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:33:29 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comment"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:33:48 -0300
  [1m[35m (199.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/api/v1/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:34:35 -0300
  
ActionController::RoutingError (No route matches [POST] "/api/v1/3/comments"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-22 20:34:54 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>"Minha familia adorou tudo"}
  [1m[36mUser Load (126.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mComment Load (127.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (125.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (206.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (206.0ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["comment", "Minha familia adorou tudo"], ["created_at", "2021-05-22 23:34:58.198180"], ["updated_at", "2021-05-22 23:34:58.198180"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (201.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (1.01ms)
Completed 201 Created in 3821ms (Views: 6.2ms | ActiveRecord: 2877.8ms | Allocations: 32178)


Started POST "/api/v1/locations/3/ratings?location_id=2&rate=1.4&_username=user_one" for 127.0.0.1 at 2021-05-22 20:35:31 -0300
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"3", "rate"=>"1.4", "_username"=>"user_one"}
  [1m[36mUser Load (129.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mRating Load (204.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (196.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (202.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (197.0ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["rate", 1.4], ["created_at", "2021-05-22 23:35:33.487075"], ["updated_at", "2021-05-22 23:35:33.487075"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (200.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.33ms)
Completed 201 Created in 1739ms (Views: 1.1ms | ActiveRecord: 1497.0ms | Allocations: 11131)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 20:36:32 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (178.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (183.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (248.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (207.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (193.6ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (198.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (199.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (177.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (230.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (134.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers]   [1m[35m (157.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (237.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (230.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.0ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (198.1ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (198.9ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.9ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (275.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (225.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (200.3ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4722.94ms)
Completed 200 OK in 5113ms (Views: 615.8ms | ActiveRecord: 4484.5ms | Allocations: 33573)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-22 20:36:45 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mUser Load (208.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (181.4ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (200.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (127.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (171.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (201.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mRating Load (208.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (195.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (199.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers]   [1m[36mComment Load (202.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:50:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers]   [1m[35m (192.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (198.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (126.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (129.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (233.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (211.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (204.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (127.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (127.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (215.1ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (129.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (3725.01ms)
Completed 200 OK in 4140ms (Views: 127.6ms | ActiveRecord: 3993.4ms | Allocations: 29585)


Started GET "/api/v1/locations/2/?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:18 -0300
Processing by Api::V1::LocationsController#show as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "id"=>"2"}
  [1m[36mUser Load (208.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (202.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:57:in `find_location'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.75ms)
Completed 200 OK in 420ms (Views: 1.9ms | ActiveRecord: 410.8ms | Allocations: 1899)


Started GET "/api/v1/locations/2?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:31 -0300
Processing by Api::V1::LocationsController#show as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "id"=>"2"}
  [1m[36mUser Load (199.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (154.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:57:in `find_location'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (1.04ms)
Completed 200 OK in 365ms (Views: 3.4ms | ActiveRecord: 353.6ms | Allocations: 1660)


Started GET "/api/v1/locations/?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:35 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one"}
  [1m[36mUser Load (201.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 209ms (ActiveRecord: 201.9ms | Allocations: 1252)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/locations_controller.rb:52:in `return_request'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:40 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one"}
  [1m[36mUser Load (204.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 212ms (ActiveRecord: 204.7ms | Allocations: 1241)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/api/v1/locations_controller.rb:52:in `return_request'
app/controllers/api/v1/locations_controller.rb:16:in `index'
Started GET "/api/v1/locations/1?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:49 -0300
Processing by Api::V1::LocationsController#show as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "id"=>"1"}
  [1m[36mUser Load (217.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (190.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:57:in `find_location'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.88ms)
Completed 200 OK in 424ms (Views: 4.9ms | ActiveRecord: 408.5ms | Allocations: 1665)


Started GET "/api/v1/locations/3?location_id=2&_username=user_one" for 127.0.0.1 at 2021-05-22 20:37:55 -0300
Processing by Api::V1::LocationsController#show as */*
  Parameters: {"location_id"=>"2", "_username"=>"user_one", "id"=>"3"}
  [1m[36mUser Load (194.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mLocation Load (233.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:57:in `find_location'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.51ms)
Completed 200 OK in 438ms (Views: 0.8ms | ActiveRecord: 427.6ms | Allocations: 1664)


  [1m[35m (266.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5705870633407954800)[0m
  [1m[35m (166.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateValidateJwtTokens (20210523002148)
  [1m[35m (202.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (192.9ms)[0m  [1m[35mCREATE TABLE "validate_jwt_tokens" ("id" bigserial primary key, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (217.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210523002148"]]
  [1m[35m (129.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (201.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (262.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5705870633407954800)[0m
  [1m[35m (198.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/auth/logou?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 21:24:38 -0300
  [1m[35m (161.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/auth/logou"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/auth/logout?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 21:24:52 -0300
Processing by AuthenticationController#logout as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mValidateJwtToken Load (215.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:20:in `logout'
  [1m[35m (240.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/authentication_controller.rb:20:in `logout'
  [1m[36mValidateJwtToken Create (481.6ms)[0m  [1m[32mINSERT INTO "validate_jwt_tokens" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2021-05-23 00:24:54.432893"], ["updated_at", "2021-05-23 00:24:54.432893"]]
  â†³ app/controllers/authentication_controller.rb:20:in `logout'
  [1m[35m (195.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/authentication_controller.rb:20:in `logout'
DEPRECATION WARNING: Class level methods will no longer inherit scoping from `create` in Rails 6.1. To continue using the scoped relation, pass it into the block directly. To instead access the full set of models, as Rails 6.1 will, use `ValidateJwtToken.default_scoped`. (called from clear_tokens at /home/alysson/Documentos/map-near-places/app/models/validate_jwt_token.rb:6)
  [1m[36mValidateJwtToken Load (296.6ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE (created_at <= '2021-05-21 21:24:55 -0300')[0m
  â†³ app/models/validate_jwt_token.rb:6:in `clear_tokens'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 3302ms (Views: 14.8ms | ActiveRecord: 2978.7ms | Allocations: 9153)


Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-22 21:25:02 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (266.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 1102ms (Views: 0.4ms | ActiveRecord: 610.2ms | Allocations: 7289)


Started GET "/api/v1/profile" for 127.0.0.1 at 2021-05-22 21:30:19 -0300
Processing by ApplicationController#not_found as */*
  Parameters: {"a"=>"api/v1/profile"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 304)


Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:31:38 -0300
  
SyntaxError (/home/alysson/Documentos/map-near-places/app/controllers/profile_controller.rb:17: syntax error, unexpected '\n', expecting =>):
  
app/controllers/profile_controller.rb:17: syntax error, unexpected '\n', expecting =>
app/controllers/profile_controller.rb:17: syntax error, unexpected '\n', expecting =>
Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:33:43 -0300
Processing by ProfileController#index as */*
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 378)


  
NameError (uninitialized constant ApiRequestAuth::SimpleCommand):
  
app/services/api_request_auth.rb:2:in `<class:ApiRequestAuth>'
app/services/api_request_auth.rb:1:in `<main>'
app/controllers/application_controller.rb:21:in `authorize_request'
Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:35:42 -0300
  [1m[35m (542.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (221.9ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (268.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
Completed 500 Internal Server Error in 2398ms (ActiveRecord: 1902.8ms | Allocations: 11845)


  
NoMethodError (undefined method `prepare_profile' for #<User:0x000055647ab5dec8>):
  
app/controllers/profile_controller.rb:8:in `index'
Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:36:17 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (179.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (189.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (324.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:15:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "Beira Mar CondomÃ­nio Clube - 4 Torres", postal_code: "53437-050", number: "2489", address: "Av. JoÃ£o Fonseca de Albuquerque - Janga", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -7.93762, longitude: -34.827135, coordinates: [], deleted_at: nil, created_at: "2021-05-22 01:16:53", updated_at: "2021-05-22 01:16:53", city: "Paulista">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (1020.8ms)
Completed 500 Internal Server Error in 2252ms (ActiveRecord: 1926.8ms | Allocations: 30209)


  
NoMethodError (undefined method `rating' for #<User:0x000055647abdce80>
Did you mean?  ratings
               ratings=):
  
app/controllers/profile_controller.rb:15:in `respond'
app/controllers/profile_controller.rb:8:in `index'
Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:36:36 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (179.5ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (203.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (126.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:15:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "Beira Mar CondomÃ­nio Clube - 4 Torres", postal_code: "53437-050", number: "2489", address: "Av. JoÃ£o Fonseca de Albuquerque - Janga", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -7.93762, longitude: -34.827135, coordinates: [], deleted_at: nil, created_at: "2021-05-22 01:16:53", updated_at: "2021-05-22 01:16:53", city: "Paulista">
[active_model_serializers]   [1m[36mRating Load (196.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:15:in `respond'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (1412.97ms)
Completed 200 OK in 2652ms (Views: 332.2ms | ActiveRecord: 2270.6ms | Allocations: 28677)


Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:49:39 -0300
  [1m[35m (257.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (193.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (202.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
Completed 500 Internal Server Error in 2648ms (ActiveRecord: 2157.4ms | Allocations: 72527)


  
NameError (undefined local variable or method `internet_connection' for #<ProfileController:0x00005589e6f5fe18>
Did you mean?  internet_connection?):
  
app/controllers/application_controller.rb:25:in `authorize_request'
Started GET "/profile" for 127.0.0.1 at 2021-05-22 21:50:07 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (244.7ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (128.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (202.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:15:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "Beira Mar CondomÃ­nio Clube - 4 Torres", postal_code: "53437-050", number: "2489", address: "Av. JoÃ£o Fonseca de Albuquerque - Janga", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -7.93762, longitude: -34.827135, coordinates: [], deleted_at: nil, created_at: "2021-05-22 01:16:53", updated_at: "2021-05-22 01:16:53", city: "Paulista">
[active_model_serializers]   [1m[36mRating Load (131.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:15:in `respond'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (1471.79ms)
Completed 200 OK in 3073ms (Views: 431.4ms | ActiveRecord: 2255.5ms | Allocations: 34871)


Started POST "/api/v1/locations?latitude=-7.935806&longitude=-34.8274155&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Condom%C3%ADnio%20Quinta%20Do%20Mediterr%C3%A2neo&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20Janga" for 127.0.0.1 at 2021-05-22 23:39:32 -0300
  [1m[35m (202.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.935806", "longitude"=>"-34.8274155", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"CondomÃ­nio Quinta Do MediterrÃ¢neo", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - Janga"}
  [1m[36mValidateJwtToken Load (205.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
Completed 500 Internal Server Error in 1614ms (ActiveRecord: 1295.3ms | Allocations: 2165)


  
JWT::ExpiredSignature (Signature has expired):
  
lib/json_web_token.rb:10:in `decode'
app/services/api_request_auth.rb:22:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started PUT "/locations/1?name=OUTRO%20NOME" for 127.0.0.1 at 2021-05-23 00:22:29 -0300
  
ActionController::RoutingError (No route matches [PUT] "/locations/1"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/location/1?name=OUTRO%20NOME" for 127.0.0.1 at 2021-05-23 00:22:39 -0300
  
ActionController::RoutingError (No route matches [PUT] "/location/1"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/locations/1?name=OUTRO%20NOME" for 127.0.0.1 at 2021-05-23 00:23:03 -0300
  
ActionController::RoutingError (No route matches [PUT] "/locations/1"):
  
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/api/v1/locations/1?name=OUTRO%20NOME" for 127.0.0.1 at 2021-05-23 00:23:34 -0300
  [1m[35m (285.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#update as */*
  Parameters: {"name"=>"OUTRO NOME", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]", "id"=>"1"}
  [1m[36mValidateJwtToken Load (204.6ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4MTAzMTJ9.Z2zqH3W4cpi_sTeBGKlAfHtsU4ujVt1WN_w-fnU9T8s"]]
  â†³ app/services/api_request_auth.rb:35:in `verify_token'
  [1m[36mUser Load (243.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (211.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:57:in `find_location'
[31mUnpermitted parameters: :username, :email, :password, :id[0m
  [1m[35m (286.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:36:in `update'
  [1m[36mLocation Exists? (205.5ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 AND "locations"."id" != $2 LIMIT $3[0m  [["name", "OUTRO NOME"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:36:in `update'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:36:in `update'
  [1m[36mLocation Update (132.5ms)[0m  [1m[33mUPDATE "locations" SET "name" = $1, "latitude" = $2, "longitude" = $3, "updated_at" = $4 WHERE "locations"."id" = $5[0m  [["name", "OUTRO NOME"], ["latitude", -7.874703], ["longitude", -34.832421], ["updated_at", "2021-05-23 03:23:43.219548"], ["id", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:36:in `update'
  [1m[35m (208.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:36:in `update'
Completed 204 No Content in 4794ms (ActiveRecord: 3037.5ms | Allocations: 31055)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-23 03:03:19 -0300
Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-23 03:03:19 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (214.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 613ms (ActiveRecord: 404.5ms | Allocations: 1810)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (205.0ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 595ms (ActiveRecord: 585.8ms | Allocations: 1780)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 03:03:29 -0300
  
ArgumentError (Before process_action callback :authorize_request has not been defined):
  
app/controllers/authentication_controller.rb:2:in `<class:AuthenticationController>'
app/controllers/authentication_controller.rb:1:in `<main>'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 03:04:11 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (204.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 1289ms (Views: 1.8ms | ActiveRecord: 789.1ms | Allocations: 7251)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 127.0.0.1 at 2021-05-23 03:04:36 -0300
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (201.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4MzYyNTJ9.u0BDoZxA6ns7Ev35cdKhovUvw6tE5dTS9EMI4a_gFqc"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (202.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (253.9ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (203.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (126.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (129.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (195.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[36mRating Load (175.3ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (196.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers]   [1m[36mRating Load (186.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (201.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (200.1ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (202.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 4]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[35m (196.5ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (201.8ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 2, comment: "\"Lugar muito bom e muito divertudo\"", deleted_at: nil, created_at: "2021-05-22 19:18:49", updated_at: "2021-05-22 19:18:49">
[active_model_serializers]   [1m[35m (181.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (201.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (203.2ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 5, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-22 23:34:58", updated_at: "2021-05-22 23:34:58">
[active_model_serializers]   [1m[35m (196.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (202.3ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (211.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:8:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (5320.29ms)
Completed 200 OK in 7000ms (Views: 665.0ms | ActiveRecord: 5896.6ms | Allocations: 55196)


Started POST "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-23 09:31:11 -0300
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>"Minha familia adorou tudo"}
  [1m[36mValidateJwtToken Load (198.1ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 713ms (ActiveRecord: 488.3ms | Allocations: 1071)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started GET "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 127.0.0.1 at 2021-05-23 09:49:57 -0300
Processing by Api::V1::CommentsController#index as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>"Minha familia adorou tudo"}
  [1m[36mValidateJwtToken Load (1083.0ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 2112ms (ActiveRecord: 1978.7ms | Allocations: 1788)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 09:50:17 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (206.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 682ms (Views: 0.9ms | ActiveRecord: 206.9ms | Allocations: 6498)


Started GET "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment" for 127.0.0.1 at 2021-05-23 09:50:33 -0300
Processing by Api::V1::CommentsController#index as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>nil}
  [1m[36mValidateJwtToken Load (201.6ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NjA2MTh9.2KRxZg2AY6UPyvOg4ec7ByiVml1ul-r_Olu-867L-oM"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (197.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mComment Load (177.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
  [1m[36mComment Load (207.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
  â†³ app/controllers/api/v1/comments_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/comments_serializer.rb:5:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (7.12ms)
Completed 200 OK in 1551ms (Views: 183.5ms | ActiveRecord: 783.9ms | Allocations: 10405)


Started GET "/profile" for 127.0.0.1 at 2021-05-23 11:37:18 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (234.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 700ms (ActiveRecord: 485.6ms | Allocations: 1758)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 11:37:27 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (206.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 693ms (Views: 0.5ms | ActiveRecord: 206.7ms | Allocations: 6477)


Started GET "/profile" for 127.0.0.1 at 2021-05-23 11:37:39 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (231.9ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NjcwNDh9.pDCI1OPqk443nxY_pEE2ioVP4S1jiC3Y0An4L4A0UtE"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (198.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (126.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "OUTRO NOME", postal_code: "53437-050", number: "2489", address: "Av. JoÃ£o Fonseca de Albuquerque - Janga", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -7.874703, longitude: -34.832421, coordinates: [], deleted_at: nil, created_at: "2021-05-22 01:16:53", updated_at: "2021-05-23 03:23:43", city: "Paulista">
[active_model_serializers]   [1m[36mRating Load (129.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (659.77ms)
Completed 200 OK in 1598ms (Views: 404.1ms | ActiveRecord: 686.8ms | Allocations: 22366)


Started POST "/auth/logout?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 12:00:00 -0300
Processing by AuthenticationController#logout as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mValidateJwtToken Load (206.1ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:20:in `logout'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 912ms (Views: 3.3ms | ActiveRecord: 633.0ms | Allocations: 3470)


Started GET "/profile" for 127.0.0.1 at 2021-05-23 12:00:21 -0300
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (202.5ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NjcwNDh9.pDCI1OPqk443nxY_pEE2ioVP4S1jiC3Y0An4L4A0UtE"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (206.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (127.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "OUTRO NOME", postal_code: "53437-050", number: "2489", address: "Av. JoÃ£o Fonseca de Albuquerque - Janga", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -7.874703, longitude: -34.832421, coordinates: [], deleted_at: nil, created_at: "2021-05-22 01:16:53", updated_at: "2021-05-23 03:23:43", city: "Paulista">
[active_model_serializers]   [1m[36mRating Load (225.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 2, rate: 2.1, deleted_at: nil, created_at: "2021-05-22 03:53:16", updated_at: "2021-05-22 03:53:16">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (916.78ms)
Completed 200 OK in 1981ms (Views: 564.8ms | ActiveRecord: 761.7ms | Allocations: 27833)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 127.0.0.1 at 2021-05-23 12:05:59 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (203.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 586ms (ActiveRecord: 370.6ms | Allocations: 1774)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 127.0.0.1 at 2021-05-23 12:06:11 -0300
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (221.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 708ms (Views: 0.7ms | ActiveRecord: 221.2ms | Allocations: 6471)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 127.0.0.1 at 2021-05-23 12:06:26 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (266.7ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4Njg3NzJ9.yWKL4NNpO9SZgtKXDzO3KDbElUuwZJitEG3TKtMF2g"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 270ms (ActiveRecord: 266.7ms | Allocations: 819)


  
ExceptionHandler::InvalidToken (Signature verification raised):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 127.0.0.1 at 2021-05-23 12:07:10 -0300
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (220.1ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4Njg3NzJ9.yWKL4NNpO9SZgtKXDzO3KDbElUuwZJitEG3TKtMF2gM"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (126.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[35m (235.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Exists? (127.9ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Any Place"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Create (131.3ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Any Place"], ["postal_code", "53437-290"], ["number", "335"], ["address", "Any Where"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -22.387863], ["longitude", -47.593791], ["created_at", "2021-05-23 15:07:12.264912"], ["updated_at", "2021-05-23 15:07:12.264912"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[35m (128.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.92ms)
Completed 201 Created in 2085ms (Views: 2.8ms | ActiveRecord: 969.5ms | Allocations: 20709)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:36:25 +0000
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
):
  
pg (1.2.3) lib/pg.rb:58:in `initialize'
pg (1.2.3) lib/pg.rb:58:in `new'
pg (1.2.3) lib/pg.rb:58:in `connect'
activerecord (6.0.3.7) lib/active_record/connection_adapters/postgresql_adapter.rb:46:in `postgresql_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:887:in `new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `checkout_new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:910:in `try_to_checkout_new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:871:in `acquire_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:593:in `checkout'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:437:in `connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:1119:in `retrieve_connection'
activerecord (6.0.3.7) lib/active_record/connection_handling.rb:221:in `retrieve_connection'
activerecord (6.0.3.7) lib/active_record/connection_handling.rb:189:in `connection'
activerecord (6.0.3.7) lib/active_record/migration.rb:562:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.7) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:39:46 +0000
  
ActiveRecord::NoDatabaseError (FATAL:  database "map_near_paces" does not exist
):
  
activerecord (6.0.3.7) lib/active_record/connection_adapters/postgresql_adapter.rb:50:in `rescue in postgresql_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/postgresql_adapter.rb:33:in `postgresql_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:887:in `new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `checkout_new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:910:in `try_to_checkout_new_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:871:in `acquire_connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:593:in `checkout'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:437:in `connection'
activerecord (6.0.3.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:1119:in `retrieve_connection'
activerecord (6.0.3.7) lib/active_record/connection_handling.rb:221:in `retrieve_connection'
activerecord (6.0.3.7) lib/active_record/connection_handling.rb:189:in `connection'
activerecord (6.0.3.7) lib/active_record/migration.rb:562:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.7) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (30.6ms)[0m  [1m[35mCREATE DATABASE "map_near_paces" ENCODING = 'unicode'[0m
  [1m[35m (34.1ms)[0m  [1m[35mCREATE DATABASE "map_near_paces_test" ENCODING = 'unicode'[0m
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:40:04 +0000
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.3.7) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.3.7) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.7) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.7) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.7) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.7) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.7) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.7) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.7) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
railties (6.0.3.7) lib/rails/engine.rb:527:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2898053297996561565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20210521001616)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "username" character varying, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521001616"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLocations (20210521223418)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "locations" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying, "postal_code" character varying, "number" character varying, "address" character varying, "country" character varying, "country_code" character varying, "state" character varying, "state_code" character varying, "latitude" float, "longitude" float, "coordinates" text[] DEFAULT '{}', "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_5e107925c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_locations_on_user_id" ON "locations"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223418"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRatings (20210521223959)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ratings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "rate" float, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a7dfeb9f5f"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_bc78a0e0b0"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_user_id" ON "ratings"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_location_id" ON "ratings"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223959"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateComments (20210521231955)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "comment" text, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_c3a3331976"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_user_id" ON "comments"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_location_id" ON "comments"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521231955"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCityToLocation (20210522011238)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "locations" ADD "city" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210522011238"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateValidateJwtTokens (20210523002148)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "validate_jwt_tokens" ("id" bigserial primary key, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210523002148"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-05-23 15:40:20.109250"], ["updated_at", "2021-05-23 15:40:20.109250"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2898053297996561565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:40:29 +0000
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4Njg3NzJ9.yWKL4NNpO9SZgtKXDzO3KDbElUuwZJitEG3TKtMF2gM"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 8.2ms | Allocations: 6480)


  
ExceptionHandler::InvalidToken (Invalid token Couldn't find User with 'id'=1):
  
app/services/api_request_auth.rb:20:in `rescue in user'
app/services/api_request_auth.rb:16:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/users" for 172.18.0.1 at 2021-05-23 15:40:49 +0000
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 1742ms (Views: 3.0ms | ActiveRecord: 1.5ms | Allocations: 1020400)


Started POST "/users" for 172.18.0.1 at 2021-05-23 15:41:16 +0000
Processing by UsersController#create as */*
  Parameters: {"name"=>"User One", "username"=>"user_one", "email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user_one"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "username", "email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "User One"], ["username", "user_one"], ["email", "user_one@email.com"], ["password_digest", "$2a$12$9Mj18ftIfsk15007F2/3dO2taM9YyrAm0SgGej7qBPlJM/4OFBiG6"], ["created_at", "2021-05-23 15:41:17.184301"], ["updated_at", "2021-05-23 15:41:17.184301"]]
  â†³ app/controllers/users_controller.rb:17:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:17:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 201 Created in 289ms (Views: 1.0ms | ActiveRecord: 9.2ms | Allocations: 5222)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:41:34 +0000
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjpudWxsLCJleHAiOjE2MjE4NzA4Nzd9.p2iCcQ63wMGxwF-hZNxMYb9cdYjSTz9ALaQNYbzFOe4"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 910)


  
ExceptionHandler::InvalidToken (Invalid token Couldn't find User without an ID):
  
app/services/api_request_auth.rb:20:in `rescue in user'
app/services/api_request_auth.rb:16:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.18.0.1 at 2021-05-23 15:42:25 +0000
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjpudWxsLCJleHAiOjE2MjE4NzA4Nzd9.p2iCcQ63wMGxwF-hZNxMYb9cdYjSTz9ALaQNYbzFOe4"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 887)


  
ExceptionHandler::InvalidToken (Invalid token Couldn't find User without an ID):
  
app/services/api_request_auth.rb:20:in `rescue in user'
app/services/api_request_auth.rb:16:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.25.0.1 at 2021-05-23 15:47:08 +0000
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjpudWxsLCJleHAiOjE2MjE4NzA4Nzd9.p2iCcQ63wMGxwF-hZNxMYb9cdYjSTz9ALaQNYbzFOe4"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 7.3ms | Allocations: 5290)


  
ExceptionHandler::InvalidToken (Invalid token Couldn't find User without an ID):
  
app/services/api_request_auth.rb:20:in `rescue in user'
app/services/api_request_auth.rb:16:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/auth/login?email=user_one%40email.com&password=[FILTERED]" for 172.25.0.1 at 2021-05-23 15:49:29 +0000
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"user_one@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user_one@email.com"], ["LIMIT", 1]]
  â†³ app/controllers/authentication_controller.rb:5:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.17ms)
Completed 200 OK in 278ms (Views: 3.5ms | ActiveRecord: 0.6ms | Allocations: 4949)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Any%20Place&address=Any%20Where" for 172.25.0.1 at 2021-05-23 15:50:08 +0000
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Any Place", "address"=>"Any Where"}
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Any Place"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Create (2.9ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Any Place"], ["postal_code", "53437-290"], ["number", "335"], ["address", "Any Where"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -22.387863], ["longitude", -47.593791], ["created_at", "2021-05-23 15:50:09.158705"], ["updated_at", "2021-05-23 15:50:09.158705"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (1.03ms)
Completed 201 Created in 598ms (Views: 3.3ms | ActiveRecord: 8.4ms | Allocations: 27443)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 172.25.0.1 at 2021-05-23 15:55:10 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (4.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.12ms)
Completed 200 OK in 275ms (Views: 14.5ms | ActiveRecord: 4.6ms | Allocations: 10443)


Started GET "/api/v1/locations?type=list&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 172.25.0.1 at 2021-05-23 15:55:44 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.6ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (2.4ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (1.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (1.5ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (40.5ms)
Completed 200 OK in 290ms (Views: 32.5ms | ActiveRecord: 14.6ms | Allocations: 14412)


Started GET "/api/v1/locations?type=map&latitude=-7.93762&longitude=-34.827135&_username=user_one" for 172.25.0.1 at 2021-05-23 15:55:52 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.93762", "longitude"=>"-34.827135", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.5ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (2.5ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.827135) / 57.2957795), ((locations.latitude - -7.93762) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.930836059187307 AND 1.0555960591873061 AND locations.longitude BETWEEN -43.90734854314591 AND -25.74692145685409 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.93762 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.93762 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.827135 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.17ms)
Completed 200 OK in 227ms (Views: 4.8ms | ActiveRecord: 3.4ms | Allocations: 3297)


Started GET "/api/v1/locations?type=map&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:57:10 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (0.8ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.65898) / 57.2957795), ((locations.latitude - -7.965855) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.959071059187306 AND 1.0273610591873057 AND locations.longitude BETWEEN -43.73981859564404 AND -25.57814140435596 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.06ms)
Completed 200 OK in 201ms (Views: 1.6ms | ActiveRecord: 1.3ms | Allocations: 3296)


Started GET "/api/v1/locations?type=map&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:58:07 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.0ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.65898) / 57.2957795), ((locations.latitude - -7.965855) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.959071059187306 AND 1.0273610591873057 AND locations.longitude BETWEEN -43.73981859564404 AND -25.57814140435596 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.07ms)
Completed 200 OK in 399ms (Views: 2.0ms | ActiveRecord: 1.6ms | Allocations: 3295)


Started GET "/api/v1/locations?type=list&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:58:10 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (1.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (20.88ms)
Completed 200 OK in 470ms (Views: 20.4ms | ActiveRecord: 6.4ms | Allocations: 8595)


Started GET "/api/v1/locations?type=list&latitude=7.965855&longitude=34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:58:33 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"7.965855", "longitude"=>"34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (0.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (1.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (1.3ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.9ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (1.6ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (26.44ms)
Completed 200 OK in 556ms (Views: 25.5ms | ActiveRecord: 8.5ms | Allocations: 8607)


Started GET "/api/v1/locations?type=map&latitude=7.965855&longitude=34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:58:41 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"7.965855", "longitude"=>"34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.4ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((34.65898 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - 34.65898) / 57.2957795), ((locations.latitude - 7.965855) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -1.0273610591873057 AND 16.959071059187306 AND locations.longitude BETWEEN 25.57814140435596 AND 43.73981859564404 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((34.65898 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.08ms)
Completed 200 OK in 775ms (Views: 2.6ms | ActiveRecord: 1.8ms | Allocations: 3294)


Started GET "/api/v1/locations?type=map&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 15:59:05 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.4ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.65898) / 57.2957795), ((locations.latitude - -7.965855) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.959071059187306 AND 1.0273610591873057 AND locations.longitude BETWEEN -43.73981859564404 AND -25.57814140435596 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.1ms)
Completed 200 OK in 604ms (Views: 2.6ms | ActiveRecord: 1.7ms | Allocations: 3295)


  [1m[36mLocation Load (0.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY "locations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/locations?type=map&latitude=--22.387863&longitude=-47.593791&_username=user_one" for 172.25.0.1 at 2021-05-23 16:00:43 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"--22.387863", "longitude"=>"-47.593791", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (2.3ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -47.593791) / 57.2957795), ((locations.latitude - 0.0) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -8.993216059187306 AND 8.993216059187306 AND locations.longitude BETWEEN -56.58700705918731 AND -38.6005749408127 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.27ms)
Completed 200 OK in 453ms (Views: 6.5ms | ActiveRecord: 2.8ms | Allocations: 3292)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-290&state_code=PE&number=335&city=Paulista&country=Brasil&name=Ma&address=momomomo" for 172.25.0.1 at 2021-05-23 16:01:15 +0000
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-290", "state_code"=>"PE", "number"=>"335", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Ma", "address"=>"momomomo"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Ma"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Create (7.6ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Ma"], ["postal_code", "53437-290"], ["number", "335"], ["address", "momomomo"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -22.387863], ["longitude", -47.593791], ["created_at", "2021-05-23 16:01:16.589254"], ["updated_at", "2021-05-23 16:01:16.589254"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (1.21ms)
Completed 201 Created in 1243ms (Views: 2.3ms | ActiveRecord: 9.8ms | Allocations: 8596)


Started POST "/api/v1/locations?latitude=-7.965855&longitude=-34.65898&postal_code=53437-000&state_code=PE&number=1229&city=Paulista&country=Brasil&name=Hospital%20Nossa%20Senhora%20do%20%C3%93&address=Av.%20Dr.%20Cl%C3%A1udio%20Jos%C3%A9%20Gueiros%20Leite%20-%20-%20Janga" for 172.25.0.1 at 2021-05-23 16:03:04 +0000
Processing by Api::V1::LocationsController#create as */*
  Parameters: {"latitude"=>"-7.965855", "longitude"=>"-34.65898", "postal_code"=>"53437-000", "state_code"=>"PE", "number"=>"1229", "city"=>"Paulista", "country"=>"Brasil", "name"=>"Hospital Nossa Senhora do Ã“", "address"=>"Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - - Janga"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "locations" WHERE "locations"."name" = $1 LIMIT $2[0m  [["name", "Hospital Nossa Senhora do Ã“"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[36mLocation Create (1.3ms)[0m  [1m[32mINSERT INTO "locations" ("user_id", "name", "postal_code", "number", "address", "country", "state_code", "latitude", "longitude", "created_at", "updated_at", "city") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 1], ["name", "Hospital Nossa Senhora do Ã“"], ["postal_code", "53437-000"], ["number", "1229"], ["address", "Av. Dr. ClÃ¡udio JosÃ© Gueiros Leite - - Janga"], ["country", "Brasil"], ["state_code", "PE"], ["latitude", -7.903328], ["longitude", -34.826748], ["created_at", "2021-05-23 16:03:05.232574"], ["updated_at", "2021-05-23 16:03:05.232574"], ["city", "Paulista"]]
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/locations_controller.rb:26:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Location (0.89ms)
Completed 201 Created in 952ms (Views: 2.1ms | ActiveRecord: 10.4ms | Allocations: 8608)


Started GET "/api/v1/locations?type=map&latitude=--22.387863&longitude=-47.593791&_username=user_one" for 172.25.0.1 at 2021-05-23 16:03:18 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"--22.387863", "longitude"=>"-47.593791", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (2.5ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -47.593791) / 57.2957795), ((locations.latitude - 0.0) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -8.993216059187306 AND 8.993216059187306 AND locations.longitude BETWEEN -56.58700705918731 AND -38.6005749408127 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.24ms)
Completed 200 OK in 216ms (Views: 6.2ms | ActiveRecord: 3.1ms | Allocations: 3296)


Started GET "/api/v1/locations?type=map&latitude=--22.387863&longitude=-47.593791&_username=user_one" for 172.25.0.1 at 2021-05-23 16:03:21 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"--22.387863", "longitude"=>"-47.593791", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.7ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -47.593791) / 57.2957795), ((locations.latitude - 0.0) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -8.993216059187306 AND 8.993216059187306 AND locations.longitude BETWEEN -56.58700705918731 AND -38.6005749408127 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((0.0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0.0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-47.593791 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.13ms)
Completed 200 OK in 212ms (Views: 3.6ms | ActiveRecord: 2.2ms | Allocations: 3293)


Started GET "/api/v1/locations?type=map&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 16:03:44 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"map", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (9.3ms)[0m  [1m[34mSELECT locations.*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -34.65898) / 57.2957795), ((locations.latitude - -7.965855) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" WHERE (locations.latitude BETWEEN -16.959071059187306 AND 1.0273610591873057 AND locations.longitude BETWEEN -43.73981859564404 AND -25.57814140435596 AND (6371.0 * 2 * ASIN(SQRT(POWER(SIN((-7.965855 - locations.latitude) * PI() / 180 / 2), 2) + COS(-7.965855 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-34.65898 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 1000) ORDER BY distance ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (0.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (1.1ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (1.0ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (1.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (34.65ms)
Completed 200 OK in 249ms (Views: 35.0ms | ActiveRecord: 15.7ms | Allocations: 8908)


Started GET "/api/v1/locations?type=list&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 16:03:51 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.5ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (0.9ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (1.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (0.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (0.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (0.5ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (0.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (0.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.8ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (61.19ms)
Completed 200 OK in 267ms (Views: 57.3ms | ActiveRecord: 11.6ms | Allocations: 19601)


Started POST "/api/v1/locations/3/ratings?location_id=2&rate=1.4&_username=user_one" for 172.25.0.1 at 2021-05-23 16:04:01 +0000
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"3", "rate"=>"1.4", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE3MzExMzF9.iY20FzKPokUWYp5y0XOEFkSga9h_Exgkt3KH7FHVu5k"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms | Allocations: 874)


  
ExceptionHandler::InvalidToken (Signature has expired):
  
lib/json_web_token.rb:15:in `rescue in decode'
lib/json_web_token.rb:9:in `decode'
app/services/api_request_auth.rb:27:in `decoded_auth_token'
app/services/api_request_auth.rb:17:in `user'
app/services/api_request_auth.rb:9:in `call'
app/controllers/application_controller.rb:11:in `authorize_request'
Started POST "/api/v1/locations/3/ratings?location_id=2&rate=1.4&_username=user_one" for 172.25.0.1 at 2021-05-23 16:04:15 +0000
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"3", "rate"=>"1.4", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mRating Load (0.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (0.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (8.3ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["rate", 1.4], ["created_at", "2021-05-23 16:04:15.828288"], ["updated_at", "2021-05-23 16:04:15.828288"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.41ms)
Completed 201 Created in 437ms (Views: 1.6ms | ActiveRecord: 15.4ms | Allocations: 11521)


Started POST "/api/v1/locations/3/ratings?location_id=2&rate=1.85&_username=user_one" for 172.25.0.1 at 2021-05-23 16:04:22 +0000
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"3", "rate"=>"1.85", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mRating Load (1.0ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (1.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (1.1ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["rate", 1.85], ["created_at", "2021-05-23 16:04:22.439772"], ["updated_at", "2021-05-23 16:04:22.439772"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.4ms)
Completed 201 Created in 412ms (Views: 1.6ms | ActiveRecord: 5.4ms | Allocations: 7412)


Started POST "/api/v1/locations/3/ratings?location_id=2&rate=2.65&_username=user_one" for 172.25.0.1 at 2021-05-23 16:04:27 +0000
Processing by Api::V1::RatingsController#create as */*
  Parameters: {"location_id"=>"3", "rate"=>"2.65", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.2ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mRating Load (0.8ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:42:in `find_rating'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mLocation Load (0.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[36mRating Create (1.0ms)[0m  [1m[32mINSERT INTO "ratings" ("user_id", "location_id", "rate", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["rate", 2.65], ["created_at", "2021-05-23 16:04:27.968211"], ["updated_at", "2021-05-23 16:04:27.968211"]]
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/ratings_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Rating (0.26ms)
Completed 201 Created in 239ms (Views: 0.7ms | ActiveRecord: 10.1ms | Allocations: 7403)


Started POST "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment=Minha%20familia%20adorou%20tudo" for 172.25.0.1 at 2021-05-23 16:04:47 +0000
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>"Minha familia adorou tudo"}
  [1m[36mValidateJwtToken Load (0.3ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (0.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (7.9ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["comment", "Minha familia adorou tudo"], ["created_at", "2021-05-23 16:04:47.698061"], ["updated_at", "2021-05-23 16:04:47.698061"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (0.4ms)
Completed 201 Created in 257ms (Views: 1.6ms | ActiveRecord: 15.6ms | Allocations: 11398)


Started POST "/api/v1/locations/3/comments?location_id=3&_username=user_one&comment=Hospital%20muito%20bom" for 172.25.0.1 at 2021-05-23 16:04:55 +0000
Processing by Api::V1::CommentsController#create as */*
  Parameters: {"location_id"=>"3", "_username"=>"user_one", "comment"=>"Hospital muito bom"}
  [1m[36mValidateJwtToken Load (0.7ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:42:in `find_comment'
[31mUnpermitted parameter: :_username[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mLocation Load (1.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[36mComment Create (4.9ms)[0m  [1m[32mINSERT INTO "comments" ("user_id", "location_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["location_id", 3], ["comment", "Hospital muito bom"], ["created_at", "2021-05-23 16:04:56.135309"], ["updated_at", "2021-05-23 16:04:56.135309"]]
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/comments_controller.rb:18:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Comment (0.32ms)
Completed 201 Created in 243ms (Views: 0.8ms | ActiveRecord: 15.4ms | Allocations: 7413)


Started GET "/api/v1/locations?type=list&latitude=-7.965855&longitude=-34.65898&_username=user_one" for 172.25.0.1 at 2021-05-23 16:05:06 +0000
Processing by Api::V1::LocationsController#index as */*
  Parameters: {"type"=>"list", "latitude"=>"-7.965855", "longitude"=>"-34.65898", "_username"=>"user_one"}
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mLocation Load (1.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" INNER JOIN "users" ON "users"."id" = "locations"."user_id" ORDER BY "locations"."name" ASC[0m
  â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (1.2ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mRating Load (2.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (0.8ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-23 16:04:47", updated_at: "2021-05-23 16:04:47">
[active_model_serializers]   [1m[36mRating Load (3.1ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[36mComment Load (0.7ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/controllers/api/v1/locations_controller.rb:48:in `return_request'
[active_model_serializers]   [1m[35m (0.8ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 1]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers]   [1m[35m (0.6ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 3]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/ratings_serializer.rb:5:in `created_by'
[active_model_serializers] No serializer found for resource: #<Comment id: 1, user_id: 1, location_id: 3, comment: "Minha familia adorou tudo", deleted_at: nil, created_at: "2021-05-23 16:04:47", updated_at: "2021-05-23 16:04:47">
[active_model_serializers]   [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:18:in `score'
[active_model_serializers]   [1m[35m (0.6ms)[0m  [1m[34mSELECT MIN(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:22:in `minimun_rate'
[active_model_serializers]   [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX(rate) FROM "ratings" WHERE "ratings"."location_id" = $1[0m  [["location_id", 2]]
[active_model_serializers]   â†³ app/models/location.rb:26:in `maximun_rate'
[active_model_serializers]   [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   â†³ app/serializers/locations_list_serializer.rb:9:in `created_by'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (68.8ms)
Completed 200 OK in 281ms (Views: 59.7ms | ActiveRecord: 17.5ms | Allocations: 23119)


Started GET "/profile" for 172.25.0.1 at 2021-05-23 16:05:26 +0000
Processing by ProfileController#index as */*
  [1m[36mValidateJwtToken Load (0.4ms)[0m  [1m[34mSELECT "validate_jwt_tokens".* FROM "validate_jwt_tokens" WHERE "validate_jwt_tokens"."token" = $1[0m  [["token", "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2MjE4NzEzNjl9.2x-cl4Wu57QtcocxDP_kQzHxQ44TFqj5lc29oFoYJFQ"]]
  â†³ app/services/api_request_auth.rb:40:in `verify_token'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/api_request_auth.rb:17:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/profile_controller.rb:6:in `index'
[active_model_serializers]   [1m[36mLocation Load (1.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Location id: 1, user_id: 1, name: "Any Place", postal_code: "53437-290", number: "335", address: "Any Where", country: "Brasil", country_code: nil, state: nil, state_code: "PE", latitude: -22.387863, longitude: -47.593791, coordinates: [], deleted_at: nil, created_at: "2021-05-23 15:50:09", updated_at: "2021-05-23 15:50:09", city: "Paulista">
[active_model_serializers]   [1m[36mRating Load (0.7ms)[0m  [1m[34mSELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = $1[0m  [["user_id", 1]]
[active_model_serializers]   â†³ app/controllers/profile_controller.rb:14:in `respond'
[active_model_serializers] No serializer found for resource: #<Rating id: 1, user_id: 1, location_id: 3, rate: 1.4, deleted_at: nil, created_at: "2021-05-23 16:04:15", updated_at: "2021-05-23 16:04:15">
[active_model_serializers] Rendered ProfileSerializer with ActiveModelSerializers::Adapter::Attributes (23.57ms)
Completed 200 OK in 236ms (Views: 22.1ms | ActiveRecord: 3.3ms | Allocations: 7629)


  [1m[35m (30.7ms)[0m  [1m[35mCREATE DATABASE "map_near_paces" ENCODING = 'unicode'[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE DATABASE "map_near_paces_test" ENCODING = 'unicode'[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2898053297996561565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20210521001616)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "username" character varying, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521001616"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLocations (20210521223418)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "locations" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying, "postal_code" character varying, "number" character varying, "address" character varying, "country" character varying, "country_code" character varying, "state" character varying, "state_code" character varying, "latitude" float, "longitude" float, "coordinates" text[] DEFAULT '{}', "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_5e107925c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_locations_on_user_id" ON "locations"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223418"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRatings (20210521223959)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "ratings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "rate" float, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a7dfeb9f5f"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_bc78a0e0b0"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_user_id" ON "ratings"  ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_ratings_on_location_id" ON "ratings"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521223959"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateComments (20210521231955)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "location_id" bigint NOT NULL, "comment" text, "deleted_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_c3a3331976"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_user_id" ON "comments"  ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_comments_on_location_id" ON "comments"  ("location_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210521231955"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCityToLocation (20210522011238)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "locations" ADD "city" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210522011238"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateValidateJwtTokens (20210523002148)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "validate_jwt_tokens" ("id" bigserial primary key, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210523002148"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-05-23 16:43:57.394189"], ["updated_at", "2021-05-23 16:43:57.394189"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2898053297996561565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
